# Kiosk Seven 마케팅 학교 구현 검토 및 수정 작업 내역

**작성일시**: 2026년 2월 9일 01:37:17

---

## 프로젝트 개요
- **프로젝트명**: Kiosk Seven - 이주민/유학생 교육 플랫폼
- **GitHub**: https://github.com/infoamous-source/kiosk
- **Vercel 배포**: https://kiosk-seven-gamma.vercel.app
- **기술 스택**: React 19, TypeScript 5.9, Vite 7.3, Tailwind CSS 4, react-router-dom, i18next, Supabase
- **이번 작업 목표**: 구현 기획서 검토 및 잘못된 구현 수정

---

## 세션 컨텍스트

### 이전 세션에서 완료된 주요 작업
1. **Supabase 데이터베이스 스키마 구축**
   - 6개 테이블 생성 (profiles, instructors, enrollments, school_profiles, school_progress, instructor_settings)
   - UUID 기반 스키마로 전환
   - ENUM 타입 정의 (user_role, enrollment_status, school_id_enum)

2. **학생 등록 플로우 구현**
   - CongratsPage.tsx: 입학 축하 중간 페이지
   - TrackCard.tsx: 신규/기존 학생 구분 로직
   - RegisterForm.tsx: 학생 등록 후 AI Welcome 페이지로 이동

3. **AI 비서 연결 페이지**
   - AIWelcomePage.tsx: 3단계 웰컴 플로우 (welcome → guide → input)
   - AIAssistantConnect.tsx: API 키 검증 및 에러 핸들링
   - API 키를 Supabase profiles 테이블에 저장
   - gemini-1.5-flash 모델로 변경

4. **API 키 이슈 발견**
   - 제공된 Google Gemini API 키가 모든 모델에서 404 에러 반환
   - 키가 비활성화되었거나 지역 제한이 있는 것으로 판단

---

## 🔍 이번 세션 작업 내용

### 1. 구현 기획서 검토 요청
- **사용자 요청**: "개편안을 다시 확인해줘 분명히 커리큘럼 (시간표)이름을 적고 클릭시 하위페이지에 수업 요약 정리가 되어있고 그 밑에 각종 AI 툴버튼이 있는 것으로 정리되었는데 구현이 잘못디어이음"
- **추가 요청**: "구현기획서 다시 잘 보고 고쳐 이거말고도 다른것도 틀린거 있는지"

### 2. 현황 분석 완료

#### 발견된 문제점

**A. 커리큘럼 구조 문제 (주요 이슈)**
- **현재 구현**: `CurriculumTab.tsx` → `PeriodTimeline` 컴포넌트로 6개 교시를 타임라인 형태로 표시
  - 각 교시 클릭 시 → 바로 도구 페이지 (`/marketing/school/tools/aptitude-test` 등)로 이동
  - 교시별 설명이나 요약 페이지 없음

- **원래 계획 (예상)**:
  ```
  커리큘럼 탭
  ├─ 1교시: 마케팅 적성검사 [클릭]
  │   └─ 상세 페이지:
  │       ├─ 수업 요약/설명
  │       └─ AI 도구 버튼 (마케팅 적성검사 시작하기)
  ├─ 2교시: Market Compass 스캐너 [클릭]
  │   └─ 상세 페이지:
  │       ├─ 수업 요약/설명
  │       └─ AI 도구 버튼 (스캐너 시작하기)
  ```

- **필요한 수정**:
  1. 교시별 상세 페이지 컴포넌트 생성 (6개)
  2. 라우팅 수정: `/marketing/school/curriculum/:periodId` 라우트 추가
  3. PeriodTimeline에서 도구가 아닌 상세 페이지로 이동하도록 변경
  4. 상세 페이지에서 수업 설명 + 도구 버튼 배치

**B. 용어 불일치 (부차적 이슈)**
- 현재 "학교" 용어 사용
- 사용자가 이전에 "학생/코스" 용어로 변경 요청했으나 미반영

**C. 회원가입 에러 메시지 (부차적 이슈)**
- 현재 RegisterForm에서 실패 시 명확한 원인과 해결방안 미제공
- 빨간 줄로 원인과 해결방안을 노출시켜야 함

### 3. 파일 분석 완료

#### 읽은 파일
| 파일 경로 | 목적 |
|-----------|------|
| `20260207_205546_작업내역.md` | 이전 마케팅 트랙 작업 내역 확인 |
| `C:\Users\wodnj\.claude\plans\parallel-booping-prism.md` | Enrollment 시스템 계획서 확인 |
| `src/pages/marketing/school/CurriculumTab.tsx` | 현재 커리큘럼 구현 확인 |
| `src/components/school/PeriodTimeline.tsx` | 타임라인 컴포넌트 구조 확인 |
| `src/types/school.ts` | 학교 타입 정의 및 SCHOOL_CURRICULUM 상수 확인 |
| `src/pages/marketing/MarketingHubPage.tsx` | 마케팅 허브 구조 확인 |
| `src/pages/marketing/school/MarketingSchoolLayout.tsx` | 학교 레이아웃 확인 |

#### 현재 파일 구조
```
src/pages/marketing/school/
├── MarketingSchoolLayout.tsx    ✅ 존재 (상단 헤더 + 하단 네비게이션)
├── AttendanceTab.tsx             ✅ 존재
├── CurriculumTab.tsx             ✅ 존재 (문제 있음 - 상세 페이지 없음)
├── LabTab.tsx                    ✅ 존재
├── AISetupPage.tsx               ✅ 존재
├── SchoolToolRouter.tsx          ✅ 존재
└── tools/
    ├── AptitudeTestTool.tsx      ✅ 존재
    ├── MarketScannerTool.tsx     ✅ 존재
    ├── EdgeMakerTool.tsx         ✅ 존재
    ├── ViralCardMakerTool.tsx    ✅ 존재
    ├── PerfectPlannerTool.tsx    ✅ 존재
    └── ROASSimulatorTool.tsx     ✅ 존재

필요한 신규 파일 (❌ 미생성):
src/pages/marketing/school/periods/
├── PeriodDetailPage.tsx          ❌ 생성 필요 (공통 레이아웃)
├── Period1Detail.tsx             ❌ 생성 필요 (1교시 상세)
├── Period2Detail.tsx             ❌ 생성 필요 (2교시 상세)
├── Period3Detail.tsx             ❌ 생성 필요 (3교시 상세)
├── Period4Detail.tsx             ❌ 생성 필요 (4교시 상세)
├── Period5Detail.tsx             ❌ 생성 필요 (5교시 상세)
└── Period6Detail.tsx             ❌ 생성 필요 (6교시 상세)
```

---

## ✅ 이번 세션에서 완료된 작업

1. **문제 분석 완료**
   - 커리큘럼 구조 문제 정확히 파악
   - 필요한 파일 구조 설계 완료
   - 기존 코드 분석 완료

2. **작업 계획 수립**
   - Todo 리스트 생성
   - 우선순위 설정

---

## ❌ 미완료 작업 (다음 세션에서 진행 필요)

### 우선순위 1: 커리큘럼 구조 수정 (필수)

#### 1-1. 교시별 상세 페이지 생성
**생성할 파일 (7개)**:
- `src/pages/marketing/school/periods/PeriodDetailPage.tsx` - 공통 레이아웃 컴포넌트
- `src/pages/marketing/school/periods/Period1Detail.tsx` - 1교시: 마케팅 적성검사
- `src/pages/marketing/school/periods/Period2Detail.tsx` - 2교시: Market Compass 스캐너
- `src/pages/marketing/school/periods/Period3Detail.tsx` - 3교시: Edge Maker
- `src/pages/marketing/school/periods/Period4Detail.tsx` - 4교시: Viral Card Maker
- `src/pages/marketing/school/periods/Period5Detail.tsx` - 5교시: Perfect Planner
- `src/pages/marketing/school/periods/Period6Detail.tsx` - 6교시: ROAS Simulator

**상세 페이지 구조**:
```tsx
<PeriodDetailPage>
  {/* 교시 헤더 */}
  <header>
    <badge>N교시</badge>
    <h1>수업 제목</h1>
  </header>

  {/* 수업 요약/설명 */}
  <section>
    <h2>이 수업에서 배울 내용</h2>
    <p>수업 설명...</p>
  </section>

  {/* AI 도구 버튼 */}
  <section>
    <h3>실습 도구</h3>
    <button onClick={() => navigate('/marketing/school/tools/...')}>
      🎯 도구 시작하기
    </button>
  </section>
</PeriodDetailPage>
```

#### 1-2. 라우팅 수정
**수정할 파일**: `src/App.tsx` 또는 라우터 파일
- 추가할 라우트: `/marketing/school/curriculum/:periodId`
- 각 periodId에 맞는 상세 페이지 컴포넌트 연결

#### 1-3. PeriodTimeline 수정
**수정할 파일**: `src/components/school/PeriodTimeline.tsx`
- 현재: `navigate(period.toolRoute)` - 도구로 직접 이동
- 수정: `navigate(`/marketing/school/curriculum/${period.id}`)` - 상세 페이지로 이동

#### 1-4. i18n 키 추가
**수정할 파일**:
- `public/locales/ko/common.json`
- `public/locales/en/common.json`

**추가할 키**:
```json
{
  "school.periods.aptitudeTest.summary": "나에게 맞는 마케팅 분야를 알아보세요",
  "school.periods.aptitudeTest.details": "상세 설명...",
  "school.periods.marketScanner.summary": "시장 트렌드와 경쟁자를 분석해요",
  // ... 각 교시별 summary, details 키
}
```

### 우선순위 2: 용어 변경 (중요도: 중)

**수정할 파일들**:
- `src/pages/marketing/MarketingHubPage.tsx`
  - "예비 마케터 학교" → "마케팅 코스" 또는 "마케팅 과정"
  - "학교 입장하기" → "코스 시작하기"
- `src/pages/marketing/school/MarketingSchoolLayout.tsx`
  - 헤더 제목 변경
- `public/locales/ko/common.json`
  - `school.*` 키들을 `course.*` 또는 적절한 용어로 변경
- `public/locales/en/common.json`
  - 영어 번역도 함께 변경

### 우선순위 3: 회원가입 에러 메시지 개선 (중요도: 중)

**수정할 파일**: `src/components/auth/RegisterForm.tsx`

**필요한 개선사항**:
1. 에러 상태 관리 강화
2. Supabase 에러 코드별 한국어 메시지 매핑
3. 빨간색 텍스트로 원인과 해결방안 표시

**에러 메시지 예시**:
```
❌ 회원가입 실패
원인: 이미 사용 중인 이메일입니다.
해결방안: 다른 이메일 주소를 사용하거나 로그인 페이지로 이동하세요.

❌ 회원가입 실패
원인: 비밀번호가 너무 짧습니다.
해결방안: 최소 6자 이상의 비밀번호를 입력하세요.
```

### 우선순위 4: 기타 구현 오류 확인 (중요도: 낮)

**검토할 항목**:
1. AttendanceTab.tsx - 출석 기능이 기획서대로 구현되었는지 확인
2. LabTab.tsx - 실습실 기능이 기획서대로 구현되었는지 확인
3. MarketingHubPage.tsx - Pro 도구 잠금 로직이 올바른지 확인

---

## 기술 노트

### 현재 커리큘럼 데이터 구조
```typescript
// src/types/school.ts
export interface SchoolPeriod {
  id: PeriodId;
  period: number;           // 1~6
  nameKey: string;           // i18n 키
  descriptionKey: string;    // i18n 키 (현재는 짧은 설명만)
  icon: string;              // lucide 아이콘 이름
  color: string;             // tailwind 색상
  toolRoute: string;         // 도구 라우트
}

export const SCHOOL_CURRICULUM: SchoolPeriod[] = [
  {
    id: 'aptitude-test',
    period: 1,
    nameKey: 'school.periods.aptitudeTest.name',
    descriptionKey: 'school.periods.aptitudeTest.description',
    icon: 'ClipboardCheck',
    color: 'rose',
    toolRoute: '/marketing/school/tools/aptitude-test',
  },
  // ... 6개 교시
];
```

**제안**:
- `toolRoute` 대신 `detailRoute` 추가 또는
- 기존 구조 유지하고 상세 페이지에서 도구로 연결

### 라우팅 구조 제안
```
현재:
/marketing/school/attendance
/marketing/school/curriculum          (CurriculumTab - 목록만 표시)
/marketing/school/lab
/marketing/school/tools/aptitude-test (바로 도구)

수정 후:
/marketing/school/attendance
/marketing/school/curriculum                        (CurriculumTab - 목록)
/marketing/school/curriculum/aptitude-test         (상세 페이지 - NEW!)
/marketing/school/tools/aptitude-test              (도구 - 상세 페이지에서 진입)
```

---

## 다음 세션 시작 방법

1. **즉시 시작할 작업**: "커리큘럼 상세 페이지 생성부터 시작해줘"
2. **Todo 리스트 상태**:
   - ⏳ 커리큘럼 구조 수정 - 교시별 상세 페이지 생성 (in_progress)
   - ⏸️ 학교 → 코스 용어 변경 (pending)
   - ⏸️ 회원가입 실패 시 빨간 줄로 원인과 해결방안 노출 (pending)
   - ⏸️ 다른 구현 오류 확인 및 수정 (pending)

---

## 참고 문서
- 이전 작업 내역: `20260207_205546_작업내역.md`
- Enrollment 계획서: `C:\Users\wodnj\.claude\plans\parallel-booping-prism.md`
- 전체 구현 계획: `C:\Users\wodnj\.claude\plans\parallel-booping-prism.md`

---

## 사용자 피드백 요약
- "커리큘럼 구현이 잘못되었음" ✅ 확인 완료
- "클릭 시 하위 페이지에 수업 요약 + AI 툴 버튼이 있어야 함" ✅ 이해 완료
- "이것 말고도 다른 것도 틀린 거 있는지 확인" ⏸️ 커리큘럼 수정 후 진행 예정
- "학교가 아니라 학생/코스 용어로 변경" ⏸️ 추후 진행 예정
- "회원가입 실패 시 원인과 해결방안을 빨간 줄로 표시" ⏸️ 추후 진행 예정

---

## 예상 소요 시간
- 커리큘럼 상세 페이지 생성: 30-40분
- 용어 변경: 15-20분
- 회원가입 에러 메시지 개선: 20-30분
- 기타 검토: 15-20분
- **총 예상 시간**: 1.5-2시간

---

**작성자**: Claude (Sonnet 3.5)
**세션 ID**: 이전 세션에서 컨텍스트 압축 후 이어받음
